(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64686,e=>{"use strict";var t=e.i(25897),r=e.i(60290),s=e.i(48798),a=e.i(85724),i=e.i(82846);function n(){let e,n,o=(0,r.c)(2);return(0,i.useIsNative)()?(o[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(s.default,{}),o[0]=e):e=o[0],o[1]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsxs)("div",{className:"flex titlebar-drag-region h-12 bg-gray-800 absolute w-full items-center justify-between px-2 shadow select-none",children:[e,(0,t.jsx)("div",{className:"titlebar-no-drag flex items-center h-full",children:(0,t.jsx)(a.default,{})})]}),o[1]=n):n=o[1],n):null}e.s(["default",()=>n])},15379,e=>{"use strict";e.s(["API_ENDPOINTS",0,{getModsJson:e=>`https://raw.githubusercontent.com/epserv-ru/modpack/refs/heads/meta/mods-${e}.json`,MINECRAFT_VERSIONS:"https://raw.githubusercontent.com/epserv-ru/modpack/refs/heads/meta/minecraft_versions.json",SERVERS_JSON:"https://raw.githubusercontent.com/epserv-ru/modpack/refs/heads/meta/servers.json"},"APP_LINKS",0,{WINDOWS:"https://github.com/epserv-ru/modpack-app/releases/download/v2.1.1/EP.Modpack.2.1.0-Windows-X64.exe",LINUX:"https://github.com/epserv-ru/modpack-app/releases/download/v2.1.1/EP.Modpack-2.1.0-Linux-X64.AppImage",MACOS:"https://github.com/epserv-ru/modpack-app/releases/download/v2.1.1/EP.Modpack-2.1.0-arm64-macOS-ARM64.dmg"}])},26819,e=>{e.v("/_next/static/media/ep-logo.53bb4204.svg")},95749,88589,e=>{"use strict";var t=e.i(25897),r=e.i(60290);let s={src:e.i(26819).default,width:1500,height:1500,blurWidth:0,blurHeight:0};function a(){let e,a=(0,r.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("img",{src:s.src,className:"h-6 w-6"}),(0,t.jsx)("span",{className:"text-lg font-semibold text-white",children:"modpack"})]}),a[0]=e):e=a[0],e}e.s(["default",()=>a],95749),e.i(85512);var i=e.i(89646),i=i,n=e.i(60238),o=e.i(50612);function l(){let e,s,a,l=(0,r.c)(5),c=(0,o.usePathname)();l[0]===Symbol.for("react.memo_cache_sentinel")?(e=["Выбор версии","Выбор модов","Загрузка сборки"],l[0]=e):e=l[0];let d=e;return l[1]!==c?(s=0,"/select-version"===c?s=0:"/select-mods"===c?s=1:"/download-mods"===c&&(s=2),l[1]=c,l[2]=s):s=l[2],l[3]!==s?(a=(0,t.jsx)("nav",{className:"flex h-[52px] w-[656px] items-center justify-around bg-transparent",children:d.map((e,r)=>(0,t.jsxs)(n.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:`flex h-5 w-5 items-center justify-center rounded-full border ${r===s?"border-primary-500":r<s?"border-white":"border-gray-400"}`,children:(0,t.jsx)("span",{className:`text-xs font-medium ${r===s?"text-primary-500":r<s?"text-white":"text-gray-400"}`,children:r+1})}),(0,t.jsx)("div",{className:`text-base font-medium ${r===s?"text-primary-500":r<s?"text-white":"text-gray-400"}`,children:e})]}),r<2&&(0,t.jsx)(i.default,{className:"text-gray-400"})]},r))}),l[3]=s,l[4]=a):a=l[4],a}e.s(["default",()=>l],88589)},83944,e=>{"use strict";var t=e.i(25897),r=e.i(60290),s=e.i(60238),a=e.i(3947),i=e.i(15379);let n=(0,s.createContext)(void 0);function o(e){let o,l=(0,r.c)(3),{children:c}=e,d=function(){let[e,t]=(0,s.useState)({}),[r,n]=(0,s.useState)({}),[o,l]=(0,s.useState)({}),c=(0,s.useCallback)(async(e,t,r,s=new Set)=>{if(s.has(e.id))return console.warn(`Обнаружена циклическая зависимость для мода: ${e.name} (${e.id})`),{id:e.id,name:e.name,purpose:e.purpose,description:e.description,size:0,icon_url:e.icon_url,site:e.site_link,required:e.required,recommended:e.recommended,library:e.library,broken:!0,available:!1,reliable_link:null,dependencies:null};s.add(e.id);let a=e.download_link,i=0;if(a)try{let e=await fetch(a,{method:"HEAD"});i=e.ok?parseInt(e.headers.get("Content-Length")||"0",10):0}catch(t){console.warn(`Ошибка получения размера для ${e.name}:`,t)}let n=null;if(e.dependencies?.length){let a=e.dependencies.map(a=>{let i=t.find(e=>e.id===a);return i?c(i,t,r,s):(console.warn(`Зависимость с id ${a} не найдена для мода ${e.name}`),null)});n=(await Promise.all(a)).filter(e=>null!==e)}return{id:e.id,name:e.name,purpose:e.purpose,description:e.description,size:i/1048576,icon_url:e.icon_url,site:e.site_link,required:e.required,recommended:e.recommended,library:e.library,broken:e.broken,available:!!a,reliable_link:a,dependencies:n}},[]),d=(0,s.useCallback)(async e=>{let t=await fetch(i.API_ENDPOINTS.getModsJson(e));if(!t.ok)throw Error("Ошибка загрузки модов с гитхаба");let r=await t.json(),s=r.map(t=>c(t,r,e));return await Promise.all(s)},[c]),m=(0,s.useCallback)(async()=>{let e,r=window.sessionStorage.getItem(a.STORAGE_KEYS.MINECRAFT_VERSION);if(!r)return void console.warn("minecraftVersion не найден в sessionStorage");let s=a.STORAGE_KEYS.getModsKey(r),i=a.STORAGE_KEYS.getModsTimestamp(r),o=a.STORAGE_KEYS.getCheckedMods(r),c=localStorage.getItem(s),m=localStorage.getItem(i),u=sessionStorage.getItem(o);if(c&&m&&Date.now()-parseInt(m,10)<a.CACHE_DURATION.MODS?e=JSON.parse(c):(e=await d(r),localStorage.setItem(s,JSON.stringify(e)),localStorage.setItem(i,Date.now().toString())),t(t=>({...t,[r]:e})),u)try{let e=JSON.parse(u);l(t=>({...t,[r]:e}))}catch(t){console.warn("Ошибка загрузки сохраненных модов:",t),l(t=>({...t,[r]:e.filter(e=>e.required&&e.available)}))}else l(t=>({...t,[r]:e.filter(e=>e.required&&e.available)}));n(e=>({...e,[r]:!0}))},[d]);return(0,s.useEffect)(()=>{let e=window.sessionStorage.getItem(a.STORAGE_KEYS.MINECRAFT_VERSION);e&&o[e]&&sessionStorage.setItem(a.STORAGE_KEYS.getCheckedMods(e),JSON.stringify(o[e]))},[o]),{mods:e,loaded:r,checkedMods:o,getModsData:m,setCheckedMods:l}}();return l[0]!==c||l[1]!==d?(o=(0,t.jsx)(n.Provider,{value:d,children:c}),l[0]=c,l[1]=d,l[2]=o):o=l[2],o}function l(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useModsContext must be used within a ModsProvider");return e}e.s(["ModsProvider",()=>o,"useModsContext",()=>l],83944)},14851,e=>{"use strict";function t(e,t){let r=new Intl.PluralRules("ru-RU").select(e);return`${t[r]??t.many}`}e.s(["TextFormatter",()=>t])}]);